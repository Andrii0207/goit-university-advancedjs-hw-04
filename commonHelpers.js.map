{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/markup.js","../src/js/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '29711315-8270253fad608a552f88c48ec';\n\nfunction searchPhoto(searchQuery, page = 1) {\n    // return fetch(`${BASE_URL}?key=${API_KEY}&q=${searchQuery}&image_type=horizontal&safesearch=true`)\n    return axios({\n        baseURL: BASE_URL,\n        params: {\n            key: API_KEY,\n            q: searchQuery,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            page,\n            per_page: 40,\n        }\n    });\n}\n\nexport default searchPhoto;\n","\n\nfunction createGallery(resp) {\n\n    return resp.map(({ largeImageURL, tags, likes, views, comments, downloads }) => `<div class=\"photo-card\">\n    <img class=\"photo\" src=\"${largeImageURL}\" alt=\"${tags}\" loading=\"lazy\" />\n    <div class=\"info\">\n        <p class=\"info-item\">\n            <b>Likes:</b> ${likes}\n        </p>\n        <p class=\"info-item\">\n            <b>Views:</b> ${views}\n        </p>\n        <p class=\"info-item\">\n            <b>Comments:</b> ${comments}\n        </p>\n        <p class=\"info-item\">\n            <b>Downloads:</b> ${downloads}\n        </p>\n    </div>\n</div>`).join(\"\")\n}\n\nexport default createGallery;\n\n// webformatURL - посилання на маленьке зображення для списку карток.\n// largeImageURL - посилання на велике зображення.\n// tags - рядок з описом зображення.Підійде для атрибуту alt.\n// likes - кількість лайків.\n// views - кількість переглядів.\n// comments - кількість коментарів.\n\n// downloads - кількість завантажень.","import searchPhoto from '/js/api';\nimport createGallery from './markup';\n\n\nconst refs = {\n    form: document.querySelector('.search-form'),\n    input: document.querySelector('.input'),\n    btn: document.querySelector('.submit-btn'),\n    gallery: document.querySelector('.gallery'),\n    loadMoreBtn: document.querySelector('.load-more')\n}\nrefs.loadMoreBtn.classList.add('visually-hidden')\nlet page = 1;\nlet searchQuery;\n\nrefs.form.addEventListener('submit', onSearchSubmit)\nrefs.loadMoreBtn.addEventListener('click', handlerLoadMore)\n\nasync function handlerLoadMore() {\n    page += 1;\n    const resp = await searchPhoto(searchQuery, page);\n    const data = resp.data;\n    let total_pages = data.hits.total / data.hits.totalHits\n    console.log(\"resp load_more >>>\", resp)\n    console.log(\"resp.data (load_more) >>>\", resp.data)\n    refs.gallery.insertAdjacentHTML('beforeend', createGallery(data.hits));\n    if (total_pages >= 500 || page >= 13) {\n        console.log(\"click LOAD_MORE\")\n        return refs.loadMoreBtn.classList.add('visually-hidden')\n    }\n}\n\nasync function onSearchSubmit(evt) {\n    evt.preventDefault();\n    page = 1;\n    searchQuery = evt.target.searchQuery.value;\n    const resp = await searchPhoto(searchQuery, page);\n    const data = resp.data;\n    console.log(\"resp (submit) >>>\", resp)\n    console.log(\"resp.data (submit) >>>\", data)\n\n    if (data.hits.lenght === 0) {\n        return alert(\"Incorrect query name, try again\")\n    }\n    if (data.total > 40) {\n        refs.loadMoreBtn.classList.remove('visually-hidden')\n    }\n    refs.gallery.innerHTML = createGallery(data.hits);\n    refs.form.reset();\n    return;\n}\n\n"],"names":["BASE_URL","API_KEY","searchPhoto","searchQuery","page","axios","createGallery","resp","largeImageURL","tags","likes","views","comments","downloads","refs","onSearchSubmit","handlerLoadMore","data","total_pages","evt"],"mappings":"svBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAEhB,SAASC,EAAYC,EAAaC,EAAO,EAAG,CAExC,OAAOC,EAAM,CACT,QAASL,EACT,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACb,CACT,CAAK,CACL,CCjBA,SAASE,EAAcC,EAAM,CAEzB,OAAOA,EAAK,IAAI,CAAC,CAAE,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA,8BACtDL,WAAuBC;AAAA;AAAA;AAAA,4BAGzBC;AAAA;AAAA;AAAA,4BAGAC;AAAA;AAAA;AAAA,+BAGGC;AAAA;AAAA;AAAA,gCAGCC;AAAA;AAAA;AAAA,OAGzB,EAAE,KAAK,EAAE,CAChB,CCjBA,MAAMC,EAAO,CACT,KAAM,SAAS,cAAc,cAAc,EAC3C,MAAO,SAAS,cAAc,QAAQ,EACtC,IAAK,SAAS,cAAc,aAAa,EACzC,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,YAAY,CACpD,EACAA,EAAK,YAAY,UAAU,IAAI,iBAAiB,EAChD,IAAIV,EAAO,EACPD,EAEJW,EAAK,KAAK,iBAAiB,SAAUC,CAAc,EACnDD,EAAK,YAAY,iBAAiB,QAASE,CAAe,EAE1D,eAAeA,GAAkB,CAC7BZ,GAAQ,EACR,MAAMG,EAAO,MAAML,EAAYC,EAAaC,CAAI,EAC1Ca,EAAOV,EAAK,KAClB,IAAIW,EAAcD,EAAK,KAAK,MAAQA,EAAK,KAAK,UAI9C,GAHA,QAAQ,IAAI,qBAAsBV,CAAI,EACtC,QAAQ,IAAI,4BAA6BA,EAAK,IAAI,EAClDO,EAAK,QAAQ,mBAAmB,YAAaR,EAAcW,EAAK,IAAI,CAAC,EACjEC,GAAe,KAAOd,GAAQ,GAC9B,eAAQ,IAAI,iBAAiB,EACtBU,EAAK,YAAY,UAAU,IAAI,iBAAiB,CAE/D,CAEA,eAAeC,EAAeI,EAAK,CAC/BA,EAAI,eAAc,EAClBf,EAAO,EACPD,EAAcgB,EAAI,OAAO,YAAY,MACrC,MAAMZ,EAAO,MAAML,EAAYC,EAAaC,CAAI,EAC1Ca,EAAOV,EAAK,KAIlB,GAHA,QAAQ,IAAI,oBAAqBA,CAAI,EACrC,QAAQ,IAAI,yBAA0BU,CAAI,EAEtCA,EAAK,KAAK,SAAW,EACrB,OAAO,MAAM,iCAAiC,EAE9CA,EAAK,MAAQ,IACbH,EAAK,YAAY,UAAU,OAAO,iBAAiB,EAEvDA,EAAK,QAAQ,UAAYR,EAAcW,EAAK,IAAI,EAChDH,EAAK,KAAK,OAEd"}